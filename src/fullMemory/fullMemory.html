<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>PaperMemory Page</title>
    <script src="../shared/min/theme.min.js"></script>
    <style>
        @import url("https://fonts.googleapis.com/css2?family=Yantramanav:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;1,600&display=swap");
        @import url("https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600;700&display=swap");
    </style>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="../shared/css/vars.css">
    <link rel="stylesheet" type="text/css" href="../shared/css/loader.css">
    <link rel="stylesheet" type="text/css" href="../popup/css/select2.min.css">
    <link rel="stylesheet" type="text/css" href="../popup/min/popup.min.css">
    <link rel="stylesheet" type="text/css" href="fullMemory.css">

    <script defer src="../shared/min/jquery.min.js"></script>
    <script defer src="../popup/js/select2.min.js"></script>
    <script defer src="../shared/min/utils.min.js"></script>
    <script defer src="../popup/min/popup.min.js"></script>
    <script defer src="fullMemory.js"></script>
</head>

<body>
    <div id="fullmemory-container">
        <!-- Main Table Container -->
        <div id="papers-table-container">
            <table id="papers-table" class="papers-table">
                <thead class="table-header">
                    <!-- Search and Filter Row -->
                    <tr class="controls-row">
                        <th colspan="8" class="controls-header">
                            <div class="table-controls">
                                <div class="controls-left">
                                    <div class="search-container">
                                        <input id="memory-search" type="text" placeholder="Search papers..." class="search-input">
                                        <button id="memory-search-clear" class="search-clear" style="display: none;">&times;</button>
                                    </div>
                                </div>
                                <div class="controls-center">
                                    <div class="filter-controls">
                                        <button id="filter-favorites" class="filter-btn star-filter-btn" title="Toggle favorites filter">
                                            <span class="star-icon"></span>
                                        </button>
                                    </div>
                                </div>
                                <div class="controls-right">
                                    <div class="sort-controls">
                                        <select id="memory-select" class="sort-select">
                                            <option value="lastOpenDate">Last Opened</option>
                                            <option value="addDate">Date Added</option>
                                            <option value="title">Title</option>
                                            <option value="year">Year</option>
                                            <option value="count">Visit Count</option>
                                        </select>
                                        <button id="memory-sort-toggle" class="sort-btn" title="Toggle sort direction">
                                            <span class="sort-arrow">↓</span>
                                        </button>
                                    </div>
                                    <div class="sync-status" id="sync-popup-feedback" style="display: none;">
                                        <div id="sync-popup-syncing" style="display: none; align-items: center;">
                                            Syncing
                                            <div class="pm-loader" style="width: 12px; height: 12px; border-width: 2px; display: inline-block; margin: auto; margin-left: 8px;"></div>
                                        </div>
                                        <div id="sync-popup-synced" style="display: none;">Synced ✅</div>
                                        <div id="sync-popup-error" style="display: none;">Sync failed ❌</div>
                                    </div>
                                </div>
                            </div>
                        </th>
                    </tr>
                    <!-- Column Headers Row -->
                    <tr class="columns-row">
                        <th class="col-favorite">
                            <span class="header-star">&nbsp;</span>
                        </th>
                        <th class="col-title">Title</th>
                        <th class="col-authors">Authors</th>
                        <th class="col-venue">Venue</th>
                        <th class="col-year">Year</th>
                        <th class="col-tags">Tags</th>
                        <th class="col-note">Notes</th>
                        <th class="col-actions">Actions</th>
                    </tr>
                </thead>
                <tbody id="papers-table-body">
                    <!-- Table rows will be inserted here -->
                </tbody>
            </table>
        </div>
        
        <!-- Loading/Empty States -->
        <div id="table-status" class="table-status" style="display: none;">
            <div class="status-content">
                <div class="pm-loader" style="display: none;"></div>
                <div class="status-message"></div>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-paper-modal" class="modal-overlay" style="display: none">
        <div class="modal-content">
            <h3>Delete Paper</h3>
            <p>Are you sure you want to delete this paper from your memory?</p>
            <div class="modal-title" id="delete-modal-title"></div>
            <div class="modal-actions">
                <button id="delete-cancel" class="btn btn-secondary">Cancel</button>
                <button id="delete-confirm" class="btn btn-danger">Delete</button>
            </div>
        </div>
        <div id="delete-paper-id" style="display: none;"></div>
    </div>
</body>

</html>